# FlutterTodo í”„ë¡œì íŠ¸ ê³„íšì„œ

## ğŸ“± í”„ë¡œì íŠ¸ ê°œìš”
**ì´ë¦„**: FlutterTodo  
**íƒ€ì…**: macOS ë°ìŠ¤í¬í†± íƒœìŠ¤í¬ ê´€ë¦¬ ì• í”Œë¦¬ì¼€ì´ì…˜  
**ê¸°ìˆ  ìŠ¤íƒ**: Flutter 3.8+, Riverpod, macOS ë„¤ì´í‹°ë¸Œ ê¸°ëŠ¥  

## ğŸ¯ í”„ë¡œì íŠ¸ ëª©í‘œ
1. **ê°œì¸ ìƒì‚°ì„± í–¥ìƒì„ ìœ„í•œ ë¹ ë¥¸ íƒœìŠ¤í¬ ê´€ë¦¬**
2. **íŒ€ í˜‘ì—…ì„ ìœ„í•œ íƒœìŠ¤í¬ í• ë‹¹ ë° ê³µìœ  ì‹œìŠ¤í…œ êµ¬ì¶•**
3. **macOS í™˜ê²½ì— ìµœì í™”ëœ ì§ê´€ì ì¸ ì‚¬ìš©ì ê²½í—˜ ì œê³µ**

## ğŸ“‹ í˜„ì¬ êµ¬í˜„ëœ ê¸°ëŠ¥ (v1.0)

### ğŸ”¥ í•µì‹¬ ê¸°ëŠ¥
- **ì „ì—­ ë‹¨ì¶•í‚¤**: Command + , (ì½¤ë§ˆ)ë¡œ ì–¸ì œë“ ì§€ Spotlight ëª¨ë“œ í™œì„±í™”
- **Spotlight ëª¨ë“œ**: macOS Spotlightê³¼ ìœ ì‚¬í•œ ë¹ ë¥¸ íƒœìŠ¤í¬ ìƒì„± ì¸í„°í˜ì´ìŠ¤
- **í”Œë¡œíŒ… ìœˆë„ìš°**: í•­ìƒ ìµœìƒìœ„ í‘œì‹œ, íˆ¬ëª… ë°°ê²½ìœ¼ë¡œ ìì—°ìŠ¤ëŸ¬ìš´ UI
- **ë¡œì»¬ ë°ì´í„° ì €ì¥**: SharedPreferencesë¥¼ í†µí•œ ì˜¤í”„ë¼ì¸ ë°ì´í„° ê´€ë¦¬

### ğŸ“Š íƒœìŠ¤í¬ ê´€ë¦¬ ê¸°ëŠ¥
- **íƒœìŠ¤í¬ CRUD**: ìƒì„±, ìˆ˜ì •, ì‚­ì œ, ìƒíƒœ ë³€ê²½
- **íƒœìŠ¤í¬ í•„í„°ë§**: ì˜¤ëŠ˜ ë§ˆê°, ì „ì²´ íƒœìŠ¤í¬, ìƒíƒœë³„ í•„í„°
- **ë§ˆê°ì¼ ì•Œë¦¼**: ë§ˆê°ì¼ ì´ˆê³¼ ì‹œ ì‹œê°ì  ê°•ì¡° í‘œì‹œ
- **ë‹´ë‹¹ì ì‹œìŠ¤í…œ**: ìš”ì²­ì/ë‹´ë‹¹ì êµ¬ë¶„

### ğŸ¨ UI/UX íŠ¹ì§•
- **ë°˜ì‘í˜• UI**: ë§ˆìš°ìŠ¤ í˜¸ë²„ ì‹œ ì¸í„°ë™ì…˜
- **ì• ë‹ˆë©”ì´ì…˜**: ìŠ¤ì¼€ì¼/íˆ¬ëª…ë„ íš¨ê³¼
- **í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜**: ESC/Enter í‚¤ ì§€ì›
- **ì ‘ê·¼ì„±**: macOS ì ‘ê·¼ì„± ê¶Œí•œ ì•ˆë‚´

### ğŸ—ï¸ ì•„í‚¤í…ì²˜
- **ìƒíƒœ ê´€ë¦¬**: Riverpod Provider íŒ¨í„´
- **ì„œë¹„ìŠ¤ ê³„ì¸µ**: GlobalHotkey, WindowManager ë¶„ë¦¬
- **ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°**: ì¬ì‚¬ìš© ê°€ëŠ¥í•œ View Component ì„¤ê³„
- **ë°ì´í„° ëª¨ë¸**: TaskModel with JSON serialization

## ğŸš€ í–¥í›„ ê°œë°œ ê³„íš (v2.0)

### ğŸŒ ì„œë²„ ì—°ë™ ê¸°ëŠ¥
- **ë°±ì—”ë“œ API**: Spring Boot ê¸°ë°˜ REST API ì„œë²„
- **ì‹¤ì‹œê°„ ë™ê¸°í™”**: WebSocketì„ í†µí•œ ì‹¤ì‹œê°„ íƒœìŠ¤í¬ ì—…ë°ì´íŠ¸
- **í´ë¼ìš°ë“œ ì €ì¥**: PostgreSQL ê¸°ë°˜ ì¤‘ì•™ ë°ì´í„°ë² ì´ìŠ¤
- **ì˜¤í”„ë¼ì¸ ëª¨ë“œ**: ë¡œì»¬ ìºì‹± + ì˜¨ë¼ì¸ ë™ê¸°í™”

### ğŸ‘¥ íŒ€ í˜‘ì—… ê¸°ëŠ¥
- **ì‚¬ìš©ì ê´€ë¦¬**: íšŒì›ê°€ì…, ë¡œê·¸ì¸, í”„ë¡œí•„ ê´€ë¦¬
- **íŒ€/í”„ë¡œì íŠ¸**: ì—¬ëŸ¬ íŒ€ ì°¸ì—¬, í”„ë¡œì íŠ¸ë³„ íƒœìŠ¤í¬ ë¶„ë¥˜
- **íƒœìŠ¤í¬ í• ë‹¹**: ë‹¤ë¥¸ íŒ€ì›ì—ê²Œ íƒœìŠ¤í¬ í• ë‹¹/ìœ„ì„
- **ì•Œë¦¼ ì‹œìŠ¤í…œ**: íƒœìŠ¤í¬ í• ë‹¹/ë³€ê²½ ì‹œ ì‹¤ì‹œê°„ ì•Œë¦¼
- **ëŒ“ê¸€/í”¼ë“œë°±**: íƒœìŠ¤í¬ë³„ ëŒ“ê¸€ ë° ì§„í–‰ ìƒí™© ê³µìœ 

### ğŸ“± í¬ë¡œìŠ¤ í”Œë«í¼ í™•ì¥
- **ëª¨ë°”ì¼ ì•±**: iOS/Android í´ë¼ì´ì–¸íŠ¸ ê°œë°œ
- **ì›¹ ëŒ€ì‹œë³´ë“œ**: ê´€ë¦¬ììš© ì›¹ ì¸í„°í˜ì´ìŠ¤
- **Windows/Linux**: ë‹¤ë¥¸ ë°ìŠ¤í¬í†± OS ì§€ì›

### ğŸ“ˆ ê³ ê¸‰ ê¸°ëŠ¥
- **íƒœìŠ¤í¬ í…œí”Œë¦¿**: ìì£¼ ì‚¬ìš©í•˜ëŠ” íƒœìŠ¤í¬ ìœ í˜•ì„ í…œí”Œë¦¿ìœ¼ë¡œ ì €ì¥
- **ì‹œê°„ ì¶”ì **: íƒœìŠ¤í¬ë³„ ì‘ì—… ì‹œê°„ ì¸¡ì •
- **ë¦¬í¬íŠ¸/ë¶„ì„**: ìƒì‚°ì„± ë¶„ì„, ì™„ë£Œ í†µê³„
- **íƒœê·¸ ì‹œìŠ¤í…œ**: íƒœìŠ¤í¬ ë¶„ë¥˜ë¥¼ ìœ„í•œ íƒœê·¸ ê¸°ëŠ¥
- **ìš°ì„ ìˆœìœ„**: High/Medium/Low ìš°ì„ ìˆœìœ„ ì„¤ì •
- **ë°˜ë³µ íƒœìŠ¤í¬**: ì£¼ê¸°ì ìœ¼ë¡œ ë°˜ë³µë˜ëŠ” íƒœìŠ¤í¬ ì„¤ì •

## ğŸ”§ ê¸°ìˆ ì  ê°œì„ ì‚¬í•­

### ğŸ›ï¸ ì•„í‚¤í…ì²˜ ê°œì„ 
- **Clean Architecture**: ë„ë©”ì¸, ë°ì´í„°, í”„ë ˆì  í…Œì´ì…˜ ê³„ì¸µ ë¶„ë¦¬
- **Repository Pattern**: ë°ì´í„° ì†ŒìŠ¤ ì¶”ìƒí™”
- **UseCase/Interactor**: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë¶„ë¦¬
- **Dependency Injection**: ì˜ì¡´ì„± ì£¼ì… íŒ¨í„´ ì ìš©

### ğŸ› ï¸ ê°œë°œ ë„êµ¬
- **CI/CD**: GitHub Actionsë¥¼ í†µí•œ ìë™ ë¹Œë“œ/í…ŒìŠ¤íŠ¸
- **í…ŒìŠ¤íŒ…**: Unit/Widget/Integration í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ í™•ëŒ€
- **ì½”ë“œ í’ˆì§ˆ**: Lint, ì •ì  ë¶„ì„, ì½”ë“œ ë¦¬ë·° ìë™í™”
- **ë¬¸ì„œí™”**: API ë¬¸ì„œ, ì‚¬ìš©ì ê°€ì´ë“œ ì‘ì„±

### ğŸ” ë³´ì•ˆ ë° ì„±ëŠ¥
- **ì¸ì¦/ì¸ê°€**: JWT ê¸°ë°˜ í† í° ì¸ì¦
- **ë°ì´í„° ì•”í˜¸í™”**: ë¯¼ê° ì •ë³´ ì•”í˜¸í™” ì €ì¥
- **ì„±ëŠ¥ ìµœì í™”**: ì§€ì—° ë¡œë”©, ìºì‹± ì „ëµ
- **ì—ëŸ¬ í•¸ë“¤ë§**: ì „ì—­ ì—ëŸ¬ ì²˜ë¦¬ ë° ë¡œê¹…

## ğŸ“… ê°œë°œ ë¡œë“œë§µ

### Phase 1: ì„œë²„ ê¸°ë°˜ ì „í™˜ (2ê°œì›”)
- [ ] Spring Boot API ì„œë²„ êµ¬ì¶•
- [ ] ì‚¬ìš©ì ì¸ì¦ ì‹œìŠ¤í…œ êµ¬í˜„
- [ ] Flutter í´ë¼ì´ì–¸íŠ¸ API ì—°ë™
- [ ] ê¸°ì¡´ ë¡œì»¬ ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜

### Phase 2: íŒ€ í˜‘ì—… ê¸°ëŠ¥ (2ê°œì›”)
- [ ] íŒ€/í”„ë¡œì íŠ¸ ê´€ë¦¬ ê¸°ëŠ¥
- [ ] íƒœìŠ¤í¬ í• ë‹¹ ì‹œìŠ¤í…œ
- [ ] ì‹¤ì‹œê°„ ì•Œë¦¼ ê¸°ëŠ¥
- [ ] ëŒ“ê¸€/í”¼ë“œë°± ì‹œìŠ¤í…œ

### Phase 3: ê³ ë„í™” ë° í™•ì¥ (3ê°œì›”)
- [ ] ëª¨ë°”ì¼ ì•± ê°œë°œ
- [ ] ê³ ê¸‰ ë¶„ì„/ë¦¬í¬íŠ¸ ê¸°ëŠ¥
- [ ] ì„±ëŠ¥ ìµœì í™” ë° ë²„ê·¸ ìˆ˜ì •
- [ ] ì‚¬ìš©ì í”¼ë“œë°± ë°˜ì˜

## ğŸ’¡ ì¶”ê°€ ì•„ì´ë””ì–´

### ğŸ¨ UI/UX ê°œì„ 
- **ë‹¤í¬ ëª¨ë“œ**: ì‹œìŠ¤í…œ í…Œë§ˆ ì—°ë™
- **ì»¤ìŠ¤í„°ë§ˆì´ì§•**: ìƒ‰ìƒ í…Œë§ˆ, í°íŠ¸ í¬ê¸° ì„¤ì •
- **ë¯¸ë‹ˆ ëª¨ë“œ**: ë”ìš± ì‘ì€ í”Œë¡œíŒ… ìœ„ì ¯
- **ë“œë˜ê·¸ ì•¤ ë“œë¡­**: íƒœìŠ¤í¬ ìš°ì„ ìˆœìœ„ ë³€ê²½

### ğŸ”— í†µí•© ê¸°ëŠ¥
- **ìº˜ë¦°ë” ì—°ë™**: macOS Calendar ì•± ì—°ë™
- **ì´ë©”ì¼ ì—°ë™**: ì´ë©”ì¼ë¡œ íƒœìŠ¤í¬ ìƒì„±
- **Slack/Teams**: í˜‘ì—… ë„êµ¬ ì—°ë™
- **GitHub**: ì´ìŠˆ/PR ì—°ë™

### ğŸ¤– ìŠ¤ë§ˆíŠ¸ ê¸°ëŠ¥
- **AI ì¶”ì²œ**: íƒœìŠ¤í¬ ì™„ë£Œ ì‹œê°„ ì˜ˆì¸¡
- **ìë™ ë¶„ë¥˜**: íƒœìŠ¤í¬ ë‚´ìš© ê¸°ë°˜ ìë™ íƒœê·¸
- **ìŒì„± ì…ë ¥**: ìŒì„±ìœ¼ë¡œ íƒœìŠ¤í¬ ìƒì„±
- **ìŠ¤ë§ˆíŠ¸ ì•Œë¦¼**: ì ì ˆí•œ ì‹œì  ì•Œë¦¼

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡° (PostgreSQL)

### **Users (ì‚¬ìš©ì)**
```sql
CREATE TABLE users (
    user_id BIGSERIAL PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    display_name VARCHAR(100) NOT NULL,
    profile_image_url VARCHAR(500),
    status VARCHAR(20) DEFAULT 'ACTIVE',
    timezone VARCHAR(50) DEFAULT 'UTC',
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW(),
    last_active_at TIMESTAMP
);
```

### **Teams (íŒ€)**
```sql
CREATE TABLE teams (
    team_id BIGSERIAL PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    description TEXT,
    owner_id BIGINT REFERENCES users(user_id),
    status VARCHAR(20) DEFAULT 'ACTIVE',
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);
```

### **Team_Members (íŒ€ ë©¤ë²„)**
```sql
CREATE TABLE team_members (
    team_member_id BIGSERIAL PRIMARY KEY,
    team_id BIGINT REFERENCES teams(team_id) ON DELETE CASCADE,
    user_id BIGINT REFERENCES users(user_id) ON DELETE CASCADE,
    role VARCHAR(20) DEFAULT 'MEMBER', -- OWNER, ADMIN, MEMBER
    joined_at TIMESTAMP DEFAULT NOW(),
    UNIQUE(team_id, user_id)
);
```

### **Projects (í”„ë¡œì íŠ¸)**
```sql
CREATE TABLE projects (
    project_id BIGSERIAL PRIMARY KEY,
    team_id BIGINT REFERENCES teams(team_id) ON DELETE CASCADE,
    name VARCHAR(100) NOT NULL,
    description TEXT,
    status VARCHAR(20) DEFAULT 'ACTIVE',
    start_date DATE,
    end_date DATE,
    created_by BIGINT REFERENCES users(user_id),
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);
```

### **Tasks (íƒœìŠ¤í¬)**
```sql
CREATE TABLE tasks (
    task_id BIGSERIAL PRIMARY KEY,
    project_id BIGINT REFERENCES projects(project_id) ON DELETE CASCADE,
    title VARCHAR(200) NOT NULL,
    description TEXT,
    status VARCHAR(20) DEFAULT 'TODO', -- TODO, IN_PROGRESS, ON_HOLD, COMPLETED
    priority VARCHAR(20) DEFAULT 'MEDIUM', -- LOW, MEDIUM, HIGH, URGENT
    assignee_id BIGINT REFERENCES users(user_id),
    requester_id BIGINT REFERENCES users(user_id),
    due_date TIMESTAMP,
    estimated_hours DECIMAL(5,2),
    actual_hours DECIMAL(5,2),
    completion_percentage INTEGER DEFAULT 0,
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW(),
    completed_at TIMESTAMP
);
```

### **Task_Tags (íƒœìŠ¤í¬ íƒœê·¸)**
```sql
CREATE TABLE tags (
    tag_id BIGSERIAL PRIMARY KEY,
    name VARCHAR(50) NOT NULL,
    color VARCHAR(7), -- HEX color code
    team_id BIGINT REFERENCES teams(team_id) ON DELETE CASCADE,
    UNIQUE(name, team_id)
);

CREATE TABLE task_tags (
    task_id BIGINT REFERENCES tasks(task_id) ON DELETE CASCADE,
    tag_id BIGINT REFERENCES tags(tag_id) ON DELETE CASCADE,
    PRIMARY KEY(task_id, tag_id)
);
```

### **Task_Comments (íƒœìŠ¤í¬ ëŒ“ê¸€)**
```sql
CREATE TABLE task_comments (
    comment_id BIGSERIAL PRIMARY KEY,
    task_id BIGINT REFERENCES tasks(task_id) ON DELETE CASCADE,
    user_id BIGINT REFERENCES users(user_id),
    content TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);
```

### **Task_Templates (íƒœìŠ¤í¬ í…œí”Œë¦¿)**
```sql
CREATE TABLE task_templates (
    template_id BIGSERIAL PRIMARY KEY,
    team_id BIGINT REFERENCES teams(team_id) ON DELETE CASCADE,
    name VARCHAR(100) NOT NULL,
    title_template VARCHAR(200) NOT NULL,
    description_template TEXT,
    estimated_hours DECIMAL(5,2),
    priority VARCHAR(20) DEFAULT 'MEDIUM',
    created_by BIGINT REFERENCES users(user_id),
    created_at TIMESTAMP DEFAULT NOW()
);
```

### **Notifications (ì•Œë¦¼)**
```sql
CREATE TABLE notifications (
    notification_id BIGSERIAL PRIMARY KEY,
    user_id BIGINT REFERENCES users(user_id) ON DELETE CASCADE,
    type VARCHAR(50) NOT NULL, -- TASK_ASSIGNED, TASK_UPDATED, COMMENT_ADDED, etc.
    title VARCHAR(200) NOT NULL,
    message TEXT,
    reference_id BIGINT, -- task_id, project_id, etc.
    reference_type VARCHAR(20), -- TASK, PROJECT, etc.
    is_read BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT NOW()
);
```

### **Time_Tracking (ì‹œê°„ ì¶”ì )**
```sql
CREATE TABLE time_entries (
    entry_id BIGSERIAL PRIMARY KEY,
    task_id BIGINT REFERENCES tasks(task_id) ON DELETE CASCADE,
    user_id BIGINT REFERENCES users(user_id),
    start_time TIMESTAMP NOT NULL,
    end_time TIMESTAMP,
    duration_minutes INTEGER,
    description TEXT,
    created_at TIMESTAMP DEFAULT NOW()
);
```

## ğŸŒ API ì—”ë“œí¬ì¸íŠ¸ ì„¤ê³„

### **ğŸ” Authentication (ì¸ì¦)**
```
POST   /api/v1/auth/register          # íšŒì›ê°€ì…
POST   /api/v1/auth/login             # ë¡œê·¸ì¸
POST   /api/v1/auth/logout            # ë¡œê·¸ì•„ì›ƒ
POST   /api/v1/auth/refresh           # í† í° ê°±ì‹ 
POST   /api/v1/auth/forgot-password   # ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°
POST   /api/v1/auth/reset-password    # ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •
```

### **ğŸ‘¤ Users (ì‚¬ìš©ì ê´€ë¦¬)**
```
GET    /api/v1/users/me               # ë‚´ í”„ë¡œí•„ ì¡°íšŒ
PUT    /api/v1/users/me               # ë‚´ í”„ë¡œí•„ ìˆ˜ì •
GET    /api/v1/users/{userId}         # ì‚¬ìš©ì ìƒì„¸ ì¡°íšŒ
GET    /api/v1/users/search           # ì‚¬ìš©ì ê²€ìƒ‰
PUT    /api/v1/users/me/password      # ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
POST   /api/v1/users/me/avatar        # í”„ë¡œí•„ ì´ë¯¸ì§€ ì—…ë¡œë“œ
```

### **ğŸ‘¥ Teams (íŒ€ ê´€ë¦¬)**
```
GET    /api/v1/teams                  # ë‚´ íŒ€ ëª©ë¡
POST   /api/v1/teams                  # íŒ€ ìƒì„±
GET    /api/v1/teams/{teamId}         # íŒ€ ìƒì„¸ ì¡°íšŒ
PUT    /api/v1/teams/{teamId}         # íŒ€ ì •ë³´ ìˆ˜ì •
DELETE /api/v1/teams/{teamId}         # íŒ€ ì‚­ì œ

GET    /api/v1/teams/{teamId}/members # íŒ€ ë©¤ë²„ ëª©ë¡
POST   /api/v1/teams/{teamId}/members # íŒ€ ë©¤ë²„ ì´ˆëŒ€
DELETE /api/v1/teams/{teamId}/members/{userId} # ë©¤ë²„ ì‚­ì œ
PUT    /api/v1/teams/{teamId}/members/{userId}/role # ì—­í•  ë³€ê²½
```

### **ğŸ“ Projects (í”„ë¡œì íŠ¸ ê´€ë¦¬)**
```
GET    /api/v1/projects               # í”„ë¡œì íŠ¸ ëª©ë¡
POST   /api/v1/projects               # í”„ë¡œì íŠ¸ ìƒì„±
GET    /api/v1/projects/{projectId}   # í”„ë¡œì íŠ¸ ìƒì„¸
PUT    /api/v1/projects/{projectId}   # í”„ë¡œì íŠ¸ ìˆ˜ì •
DELETE /api/v1/projects/{projectId}   # í”„ë¡œì íŠ¸ ì‚­ì œ
GET    /api/v1/projects/{projectId}/stats # í”„ë¡œì íŠ¸ í†µê³„
```

### **âœ… Tasks (íƒœìŠ¤í¬ ê´€ë¦¬)**
```
GET    /api/v1/tasks                  # íƒœìŠ¤í¬ ëª©ë¡ ì¡°íšŒ
POST   /api/v1/tasks                  # íƒœìŠ¤í¬ ìƒì„±
GET    /api/v1/tasks/{taskId}         # íƒœìŠ¤í¬ ìƒì„¸ ì¡°íšŒ
PUT    /api/v1/tasks/{taskId}         # íƒœìŠ¤í¬ ìˆ˜ì •
DELETE /api/v1/tasks/{taskId}         # íƒœìŠ¤í¬ ì‚­ì œ
PUT    /api/v1/tasks/{taskId}/status  # íƒœìŠ¤í¬ ìƒíƒœ ë³€ê²½
PUT    /api/v1/tasks/{taskId}/assign  # íƒœìŠ¤í¬ í• ë‹¹

# í•„í„°ë§ ë° ê²€ìƒ‰
GET    /api/v1/tasks?assignee={userId}      # ë‹´ë‹¹ìë³„ íƒœìŠ¤í¬
GET    /api/v1/tasks?status={status}        # ìƒíƒœë³„ íƒœìŠ¤í¬
GET    /api/v1/tasks?project={projectId}    # í”„ë¡œì íŠ¸ë³„ íƒœìŠ¤í¬
GET    /api/v1/tasks?due=today              # ì˜¤ëŠ˜ ë§ˆê° íƒœìŠ¤í¬
GET    /api/v1/tasks/search?q={keyword}     # íƒœìŠ¤í¬ ê²€ìƒ‰

# ëŒ€ì‹œë³´ë“œ
GET    /api/v1/tasks/dashboard/my           # ë‚´ íƒœìŠ¤í¬ ëŒ€ì‹œë³´ë“œ
GET    /api/v1/tasks/dashboard/team/{teamId} # íŒ€ íƒœìŠ¤í¬ ëŒ€ì‹œë³´ë“œ
```

### **ğŸ’¬ Comments (ëŒ“ê¸€)**
```
GET    /api/v1/tasks/{taskId}/comments      # íƒœìŠ¤í¬ ëŒ“ê¸€ ëª©ë¡
POST   /api/v1/tasks/{taskId}/comments      # ëŒ“ê¸€ ì‘ì„±
PUT    /api/v1/comments/{commentId}         # ëŒ“ê¸€ ìˆ˜ì •
DELETE /api/v1/comments/{commentId}         # ëŒ“ê¸€ ì‚­ì œ
```

### **ğŸ·ï¸ Tags (íƒœê·¸ ê´€ë¦¬)**
```
GET    /api/v1/teams/{teamId}/tags          # íŒ€ íƒœê·¸ ëª©ë¡
POST   /api/v1/teams/{teamId}/tags          # íƒœê·¸ ìƒì„±
PUT    /api/v1/tags/{tagId}                 # íƒœê·¸ ìˆ˜ì •
DELETE /api/v1/tags/{tagId}                 # íƒœê·¸ ì‚­ì œ
```

### **ğŸ“‹ Templates (í…œí”Œë¦¿)**
```
GET    /api/v1/teams/{teamId}/templates     # íŒ€ í…œí”Œë¦¿ ëª©ë¡
POST   /api/v1/teams/{teamId}/templates     # í…œí”Œë¦¿ ìƒì„±
GET    /api/v1/templates/{templateId}       # í…œí”Œë¦¿ ìƒì„¸
PUT    /api/v1/templates/{templateId}       # í…œí”Œë¦¿ ìˆ˜ì •
DELETE /api/v1/templates/{templateId}       # í…œí”Œë¦¿ ì‚­ì œ
POST   /api/v1/templates/{templateId}/use   # í…œí”Œë¦¿ìœ¼ë¡œ íƒœìŠ¤í¬ ìƒì„±
```

### **ğŸ”” Notifications (ì•Œë¦¼)**
```
GET    /api/v1/notifications               # ë‚´ ì•Œë¦¼ ëª©ë¡
PUT    /api/v1/notifications/{notificationId}/read # ì•Œë¦¼ ì½ìŒ ì²˜ë¦¬
PUT    /api/v1/notifications/read-all      # ëª¨ë“  ì•Œë¦¼ ì½ìŒ ì²˜ë¦¬
DELETE /api/v1/notifications/{notificationId} # ì•Œë¦¼ ì‚­ì œ
```

### **â±ï¸ Time Tracking (ì‹œê°„ ì¶”ì )**
```
GET    /api/v1/tasks/{taskId}/time-entries # íƒœìŠ¤í¬ ì‹œê°„ ê¸°ë¡ ëª©ë¡
POST   /api/v1/tasks/{taskId}/time-entries/start # ì‹œê°„ ì¶”ì  ì‹œì‘
PUT    /api/v1/time-entries/{entryId}/stop # ì‹œê°„ ì¶”ì  ì¢…ë£Œ
PUT    /api/v1/time-entries/{entryId}      # ì‹œê°„ ê¸°ë¡ ìˆ˜ì •
DELETE /api/v1/time-entries/{entryId}      # ì‹œê°„ ê¸°ë¡ ì‚­ì œ
GET    /api/v1/users/{userId}/time-report  # ì‚¬ìš©ì ì‹œê°„ ë¦¬í¬íŠ¸
```

### **ğŸ“Š Reports & Analytics (ë¦¬í¬íŠ¸)**
```
GET    /api/v1/reports/team/{teamId}/productivity   # íŒ€ ìƒì‚°ì„± ë¦¬í¬íŠ¸
GET    /api/v1/reports/user/{userId}/productivity   # ê°œì¸ ìƒì‚°ì„± ë¦¬í¬íŠ¸
GET    /api/v1/reports/project/{projectId}/status   # í”„ë¡œì íŠ¸ í˜„í™© ë¦¬í¬íŠ¸
GET    /api/v1/reports/tasks/completion-trends      # íƒœìŠ¤í¬ ì™„ë£Œ ì¶”ì´
GET    /api/v1/reports/workload/{teamId}           # íŒ€ ì—…ë¬´ëŸ‰ ë¶„ì„
```

### **ğŸ”„ WebSocket Events (ì‹¤ì‹œê°„ í†µì‹ )**
```
# ì—°ê²°
WS     /ws/notifications                  # ì•Œë¦¼ ì‹¤ì‹œê°„ ìˆ˜ì‹ 

# ì´ë²¤íŠ¸ íƒ€ì…
task.created        # íƒœìŠ¤í¬ ìƒì„±
task.updated        # íƒœìŠ¤í¬ ìˆ˜ì •  
task.assigned       # íƒœìŠ¤í¬ í• ë‹¹
task.completed      # íƒœìŠ¤í¬ ì™„ë£Œ
comment.added       # ëŒ“ê¸€ ì¶”ê°€
project.updated     # í”„ë¡œì íŠ¸ ì—…ë°ì´íŠ¸
team.member.joined  # íŒ€ ë©¤ë²„ í•©ë¥˜
```

### **ğŸ“± Mobile/Desktop Sync (ë™ê¸°í™”)**
```
GET    /api/v1/sync/tasks/{lastSyncTime}  # ë³€ê²½ëœ íƒœìŠ¤í¬ ë™ê¸°í™”
POST   /api/v1/sync/tasks/batch          # íƒœìŠ¤í¬ ì¼ê´„ ì—…ë°ì´íŠ¸
GET    /api/v1/sync/offline-changes      # ì˜¤í”„ë¼ì¸ ë³€ê²½ì‚¬í•­ ì¡°íšŒ
POST   /api/v1/sync/resolve-conflicts    # ì¶©ëŒ í•´ê²°
```

## ğŸ”§ API Response í‘œì¤€ í˜•ì‹

### **ì„±ê³µ ì‘ë‹µ**
```json
{
    "success": true,
    "data": {
        // ì‘ë‹µ ë°ì´í„°
    },
    "message": "ì„±ê³µì ìœ¼ë¡œ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.",
    "timestamp": "2025-07-22T10:30:00Z"
}
```

### **ì—ëŸ¬ ì‘ë‹µ**
```json
{
    "success": false,
    "error": {
        "code": "TASK_NOT_FOUND",
        "message": "íƒœìŠ¤í¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.",
        "details": {
            "taskId": "12345"
        }
    },
    "timestamp": "2025-07-22T10:30:00Z"
}
```

### **í˜ì´ì§€ë„¤ì´ì…˜ ì‘ë‹µ**
```json
{
    "success": true,
    "data": {
        "content": [
            // ë°ì´í„° ë°°ì—´
        ],
        "pagination": {
            "page": 1,
            "size": 20,
            "totalElements": 150,
            "totalPages": 8,
            "hasNext": true,
            "hasPrevious": false
        }
    }
}
```

## ğŸ“Š ì„±ê³µ ì§€í‘œ
- **ì‚¬ìš©ì í™œì„±ë„**: ì¼ì¼ í™œì„± ì‚¬ìš©ì ìˆ˜
- **íƒœìŠ¤í¬ ì™„ë£Œìœ¨**: ìƒì„± ëŒ€ë¹„ ì™„ë£Œ ë¹„ìœ¨
- **íŒ€ ì°¸ì—¬ë„**: íŒ€ íƒœìŠ¤í¬ í• ë‹¹/ì™„ë£Œ í†µê³„
- **ì„±ëŠ¥ ì§€í‘œ**: ì•± ë¡œë”© ì‹œê°„, ì‘ë‹µ ì†ë„
- **ì‚¬ìš©ì ë§Œì¡±ë„**: ì•±ìŠ¤í† ì–´ í‰ì , ì‚¬ìš©ì í”¼ë“œë°±

## ğŸ—ï¸ ìœ ì—°í•œ ì•„í‚¤í…ì²˜ ì„¤ê³„ ê°€ì´ë“œ

### ğŸ“‹ ì„¤ê³„ ì² í•™
í”„ë¡œì íŠ¸ì˜ **ì¬ì‚¬ìš©ì„±**, **í™•ì¥ì„±**, **ìœ ì§€ë³´ìˆ˜ì„±**ì„ ë†’ì´ê¸° ìœ„í•´ **í•µì‹¬ ê¸°ëŠ¥**ê³¼ **í™•ì¥ ê¸°ëŠ¥**ì„ ë¶„ë¦¬í•˜ì—¬ ì„¤ê³„í•©ë‹ˆë‹¤. ì„œë¹„ìŠ¤ë§ˆë‹¤ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆëŠ” ìš”ì†Œë“¤ì€ ì‰½ê²Œ êµì²´í•˜ê±°ë‚˜ í™•ì¥í•  ìˆ˜ ìˆë„ë¡ **ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ ì•„í‚¤í…ì²˜**ë¥¼ ì ìš©í•©ë‹ˆë‹¤.

### ğŸ¯ í•µì‹¬ ì›ì¹™
1. **ë‹¨ì¼ ì±…ì„ ì›ì¹™**: ê° ëª¨ë“ˆì€ í•˜ë‚˜ì˜ ì±…ì„ë§Œ ê°€ì§
2. **ê°œë°©-íì‡„ ì›ì¹™**: í™•ì¥ì—ëŠ” ì—´ë ¤ìˆê³  ë³€ê²½ì—ëŠ” ë‹«í˜€ìˆìŒ
3. **ì˜ì¡´ì„± ì—­ì „**: êµ¬ì²´ì ì¸ êµ¬í˜„ì´ ì•„ë‹Œ ì¶”ìƒí™”ì— ì˜ì¡´
4. **ì¸í„°í˜ì´ìŠ¤ ë¶„ë¦¬**: í´ë¼ì´ì–¸íŠ¸ê°€ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•˜ì§€ ì•ŠìŒ

## ğŸ›ï¸ ë ˆì´ì–´ë“œ ì•„í‚¤í…ì²˜ ì„¤ê³„

### **1. Core Layer (í•µì‹¬ ê³„ì¸µ) - ì¬ì‚¬ìš© ê°€ëŠ¥**
```
core/
â”œâ”€â”€ auth/                    # ì¸ì¦ í•µì‹¬ ë¡œì§
â”‚   â”œâ”€â”€ interfaces/          # ì¸í„°í˜ì´ìŠ¤ ì •ì˜
â”‚   â”‚   â”œâ”€â”€ IAuthService     # ì¸ì¦ ì„œë¹„ìŠ¤ ì¸í„°í˜ì´ìŠ¤
â”‚   â”‚   â”œâ”€â”€ ITokenManager    # í† í° ê´€ë¦¬ ì¸í„°í˜ì´ìŠ¤
â”‚   â”‚   â””â”€â”€ IUserRepository  # ì‚¬ìš©ì ì €ì¥ì†Œ ì¸í„°í˜ì´ìŠ¤
â”‚   â”œâ”€â”€ models/              # í•µì‹¬ ë°ì´í„° ëª¨ë¸
â”‚   â”‚   â”œâ”€â”€ AuthUser         # ìµœì†Œ ì¸ì¦ ì‚¬ìš©ì ëª¨ë¸
â”‚   â”‚   â”œâ”€â”€ AuthToken        # í† í° ëª¨ë¸
â”‚   â”‚   â””â”€â”€ AuthResult       # ì¸ì¦ ê²°ê³¼ ëª¨ë¸
â”‚   â””â”€â”€ usecases/            # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚       â”œâ”€â”€ LoginUseCase     # ë¡œê·¸ì¸ ìœ ìŠ¤ì¼€ì´ìŠ¤
â”‚       â”œâ”€â”€ RegisterUseCase  # íšŒì›ê°€ì… ìœ ìŠ¤ì¼€ì´ìŠ¤
â”‚       â””â”€â”€ TokenRefreshUseCase # í† í° ê°±ì‹  ìœ ìŠ¤ì¼€ì´ìŠ¤
â”œâ”€â”€ common/                  # ê³µí†µ ìœ í‹¸ë¦¬í‹°
â”‚   â”œâ”€â”€ exceptions/          # ì˜ˆì™¸ ì •ì˜
â”‚   â”œâ”€â”€ validators/          # ê²€ì¦ ë¡œì§
â”‚   â””â”€â”€ constants/           # ìƒìˆ˜ ì •ì˜
â””â”€â”€ security/                # ë³´ì•ˆ ê´€ë ¨
    â”œâ”€â”€ encryption/          # ì•”í˜¸í™”
    â””â”€â”€ jwt/                 # JWT ì²˜ë¦¬
```

### **2. Application Layer (ì• í”Œë¦¬ì¼€ì´ì…˜ ê³„ì¸µ) - í”„ë¡œì íŠ¸ë³„ ì»¤ìŠ¤í„°ë§ˆì´ì§•**
```
application/
â”œâ”€â”€ todo/                    # TODO ì•± íŠ¹í™” ë¡œì§
â”‚   â”œâ”€â”€ models/              # í™•ì¥ëœ ëª¨ë¸
â”‚   â”‚   â””â”€â”€ TodoUser         # TODO íŠ¹í™” ì‚¬ìš©ì ëª¨ë¸
â”‚   â”œâ”€â”€ services/            # ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ UserService      # ì‚¬ìš©ì ê´€ë¦¬ ì„œë¹„ìŠ¤
â”‚   â”‚   â””â”€â”€ ProfileService   # í”„ë¡œí•„ ê´€ë¦¬ ì„œë¹„ìŠ¤
â”‚   â””â”€â”€ configs/             # ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì •
â”‚       â””â”€â”€ TodoAuthConfig   # TODO ì¸ì¦ ì„¤ì •
â””â”€â”€ shared/                  # ê³µí†µ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œì§
    â”œâ”€â”€ dto/                 # ë°ì´í„° ì „ì†¡ ê°ì²´
    â””â”€â”€ mappers/             # ëª¨ë¸ ë³€í™˜ê¸°
```

### **3. Infrastructure Layer (ì¸í”„ë¼ ê³„ì¸µ) - êµ¬í˜„ì²´**
```
infrastructure/
â”œâ”€â”€ persistence/             # ë°ì´í„° ì €ì¥
â”‚   â”œâ”€â”€ repositories/        # Repository êµ¬í˜„ì²´
â”‚   â”‚   â””â”€â”€ JpaUserRepository # JPA ì‚¬ìš©ì ì €ì¥ì†Œ
â”‚   â””â”€â”€ entities/            # JPA ì—”í‹°í‹°
â”‚       â””â”€â”€ UserEntity       # ì‚¬ìš©ì ì—”í‹°í‹°
â”œâ”€â”€ external/                # ì™¸ë¶€ ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ email/               # ì´ë©”ì¼ ì„œë¹„ìŠ¤
â”‚   â””â”€â”€ oauth/               # OAuth ì—°ë™
â””â”€â”€ security/                # ë³´ì•ˆ êµ¬í˜„ì²´
    â”œâ”€â”€ JwtTokenManager      # JWT í† í° ë§¤ë‹ˆì € êµ¬í˜„
    â””â”€â”€ BCryptPasswordEncoder # ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”
```

## ğŸ”§ í•µì‹¬ ëª¨ë¸ ì„¤ê³„

### **AuthUser (í•µì‹¬ ì¸ì¦ ëª¨ë¸) - ìµœì†Œ í•„ìˆ˜ ì •ë³´**
```java
// Core Layer
public class AuthUser {
    private String userId;        // ê³ ìœ  ì‹ë³„ì (í•„ìˆ˜)
    private String identifier;    // ë¡œê·¸ì¸ ì‹ë³„ì (ì´ë©”ì¼/ì‚¬ìš©ìëª…)
    private String passwordHash;  // ì•”í˜¸í™”ëœ ë¹„ë°€ë²ˆí˜¸ (í•„ìˆ˜)
    private AuthStatus status;    // ê³„ì • ìƒíƒœ (í•„ìˆ˜)
    private LocalDateTime createdAt;
    private LocalDateTime updatedAt;
    
    // í•µì‹¬ ì¸ì¦ ê´€ë ¨ ë©”ì„œë“œë§Œ í¬í•¨
    public boolean isActive() { return status == AuthStatus.ACTIVE; }
    public boolean canLogin() { return isActive() && passwordHash != null; }
}

public enum AuthStatus {
    ACTIVE, INACTIVE, SUSPENDED, PENDING_VERIFICATION
}
```

### **TodoUser (í™•ì¥ëœ ì‚¬ìš©ì ëª¨ë¸) - í”„ë¡œì íŠ¸ íŠ¹í™”**
```java
// Application Layer - TODO í”„ë¡œì íŠ¸ íŠ¹í™”
public class TodoUser extends AuthUser {
    private String displayName;     // í‘œì‹œ ì´ë¦„
    private String profileImageUrl; // í”„ë¡œí•„ ì´ë¯¸ì§€
    private String timezone;        // ì‹œê°„ëŒ€
    private UserPreferences preferences; // ì‚¬ìš©ì ì„¤ì •
    private LocalDateTime lastActiveAt;
    
    // TODO ì•± íŠ¹í™” ë©”ì„œë“œ
    public String getDisplayNameOrDefault() { /* ... */ }
    public boolean isOnline() { /* ... */ }
}

public class UserPreferences {
    private String language;
    private String theme;
    private NotificationSettings notifications;
    // í™•ì¥ ê°€ëŠ¥í•œ ì„¤ì •ë“¤
}
```

## ğŸ”Œ ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ ì„¤ê³„

### **IAuthService (í•µì‹¬ ì¸ì¦ ì¸í„°í˜ì´ìŠ¤)**
```java
// Core Layer - ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì¸ì¦ ì¸í„°í˜ì´ìŠ¤
public interface IAuthService {
    // í•µì‹¬ ì¸ì¦ ê¸°ëŠ¥ë§Œ ì •ì˜
    AuthResult login(String identifier, String password);
    AuthResult register(AuthUser user, String password);
    boolean validateToken(String token);
    AuthResult refreshToken(String refreshToken);
    void logout(String token);
}

public class AuthResult {
    private boolean success;
    private String accessToken;
    private String refreshToken;
    private AuthUser user;
    private String errorMessage;
    private AuthErrorCode errorCode;
}
```

### **ITodoUserService (í™•ì¥ëœ ì‚¬ìš©ì ì„œë¹„ìŠ¤)**
```java
// Application Layer - TODO íŠ¹í™”
public interface ITodoUserService extends IAuthService {
    // ì¶”ê°€ ê¸°ëŠ¥ë“¤
    TodoUser updateProfile(String userId, ProfileUpdateRequest request);
    List<TodoUser> searchUsers(String query);
    void updateLastActive(String userId);
    UserPreferences getUserPreferences(String userId);
    void updatePreferences(String userId, UserPreferences preferences);
}
```

## ğŸ› ï¸ êµ¬í˜„ì²´ ë¶„ë¦¬ ì „ëµ

### **1. Repository Pattern**
```java
// Core Interface
public interface IUserRepository {
    Optional<AuthUser> findByIdentifier(String identifier);
    AuthUser save(AuthUser user);
    boolean existsByIdentifier(String identifier);
}

// Infrastructure Implementation
@Repository
public class JpaUserRepository implements IUserRepository {
    @Autowired
    private UserJpaRepository jpaRepository;
    
    @Override
    public Optional<AuthUser> findByIdentifier(String identifier) {
        return jpaRepository.findByEmail(identifier)
            .map(this::toAuthUser);
    }
    
    // Entity <-> Model ë³€í™˜ ë¡œì§
    private AuthUser toAuthUser(UserEntity entity) { /* ... */ }
}
```

### **2. Service Implementation**
```java
// Core Implementation
@Service
public class CoreAuthService implements IAuthService {
    private final IUserRepository userRepository;
    private final ITokenManager tokenManager;
    private final IPasswordEncoder passwordEncoder;
    
    // í•µì‹¬ ì¸ì¦ ë¡œì§ë§Œ êµ¬í˜„
    @Override
    public AuthResult login(String identifier, String password) {
        // ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ë¡œê·¸ì¸ ë¡œì§
    }
}

// Application Implementation
@Service
public class TodoUserService extends CoreAuthService implements ITodoUserService {
    private final ITodoUserRepository todoUserRepository;
    
    // TODO íŠ¹í™” ê¸°ëŠ¥ êµ¬í˜„
    @Override
    public TodoUser updateProfile(String userId, ProfileUpdateRequest request) {
        // TODO ì•± íŠ¹í™” ë¡œì§
    }
}
```

## ğŸ”„ ì„¤ì • ê¸°ë°˜ í™•ì¥ì„±

### **AuthConfiguration (ì„¤ì • í´ë˜ìŠ¤)**
```java
@Configuration
public class AuthConfiguration {
    
    @Bean
    @ConditionalOnProperty(name = "app.auth.provider", havingValue = "database")
    public IAuthService databaseAuthService(IUserRepository userRepository) {
        return new DatabaseAuthService(userRepository);
    }
    
    @Bean
    @ConditionalOnProperty(name = "app.auth.provider", havingValue = "oauth")
    public IAuthService oauthAuthService(OAuthClient oauthClient) {
        return new OAuthAuthService(oauthClient);
    }
    
    @Bean
    public ITokenManager tokenManager(@Value("${app.jwt.secret}") String secret) {
        return new JwtTokenManager(secret);
    }
}
```

### **application.yml (í™˜ê²½ë³„ ì„¤ì •)**
```yaml
# ê°œë°œí™˜ê²½
app:
  auth:
    provider: database
    token:
      access-expiry: 3600
      refresh-expiry: 86400
  features:
    email-verification: false
    two-factor: false

---
# ìš´ì˜í™˜ê²½
spring:
  profiles: production
app:
  auth:
    provider: oauth
    oauth:
      google:
        client-id: ${GOOGLE_CLIENT_ID}
        client-secret: ${GOOGLE_CLIENT_SECRET}
  features:
    email-verification: true
    two-factor: true
```

## ğŸ“± Flutter í´ë¼ì´ì–¸íŠ¸ ì•„í‚¤í…ì²˜

### **Core Models (ì¬ì‚¬ìš© ê°€ëŠ¥)**
```dart
// core/models/auth_user.dart
class AuthUser {
  final String userId;
  final String identifier;
  final AuthStatus status;
  final DateTime createdAt;
  
  // í•µì‹¬ ì¸ì¦ ê´€ë ¨ ë©”ì„œë“œë§Œ
  bool get isActive => status == AuthStatus.active;
  bool get canLogin => isActive;
}

// application/models/todo_user.dart
class TodoUser extends AuthUser {
  final String displayName;
  final String? profileImageUrl;
  final String timezone;
  final UserPreferences preferences;
  
  // TODO ì•± íŠ¹í™” ë©”ì„œë“œ
  String get displayNameOrDefault => displayName.isNotEmpty ? displayName : identifier;
}
```

### **Repository Interfaces**
```dart
// core/interfaces/auth_repository.dart
abstract class IAuthRepository {
  Future<AuthResult> login(String identifier, String password);
  Future<AuthResult> register(AuthUser user, String password);
  Future<bool> validateToken(String token);
  Future<void> logout();
}

// application/interfaces/todo_user_repository.dart
abstract class ITodoUserRepository extends IAuthRepository {
  Future<TodoUser> updateProfile(ProfileUpdateRequest request);
  Future<List<TodoUser>> searchUsers(String query);
  Future<UserPreferences> getPreferences();
}
```

## ğŸš€ í™•ì¥ ì‹œë‚˜ë¦¬ì˜¤ ì˜ˆì‹œ

### **ì‹œë‚˜ë¦¬ì˜¤ 1: ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ì—ì„œ ì¬ì‚¬ìš©**
1. **Core Layer** ê·¸ëŒ€ë¡œ ë³µì‚¬
2. **Application Layer**ë§Œ ìƒˆ í”„ë¡œì íŠ¸ìš©ìœ¼ë¡œ ìƒì„±
3. **Infrastructure Layer** í•„ìš”í•œ ë¶€ë¶„ë§Œ êµì²´

### **ì‹œë‚˜ë¦¬ì˜¤ 2: OAuth ë¡œê·¸ì¸ ì¶”ê°€**
1. `IOAuthService` ì¸í„°í˜ì´ìŠ¤ ì¶”ê°€
2. `GoogleOAuthService`, `KakaoOAuthService` êµ¬í˜„ì²´ ìƒì„±
3. ì„¤ì • íŒŒì¼ì—ì„œ provider ë³€ê²½ë§Œìœ¼ë¡œ ì „í™˜

### **ì‹œë‚˜ë¦¬ì˜¤ 3: ë‹¤ì¤‘ ë°ì´í„°ë² ì´ìŠ¤ ì§€ì›**
1. `IUserRepository` ì¸í„°í˜ì´ìŠ¤ëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€
2. `MongoUserRepository`, `RedisUserRepository` êµ¬í˜„ì²´ ì¶”ê°€
3. ì„¤ì • ê¸°ë°˜ìœ¼ë¡œ Repository ì„ íƒ

## ğŸ’¡ ê°œë°œ ê°€ì´ë“œë¼ì¸

### **1. ìƒˆ ê¸°ëŠ¥ ì¶”ê°€ ì‹œ**
- Coreì— ì¶”ê°€í• ì§€, Applicationì— ì¶”ê°€í• ì§€ ë¨¼ì € íŒë‹¨
- ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì—ì„œë„ ì“¸ ìˆ˜ ìˆë‹¤ë©´ â†’ Core
- í˜„ì¬ í”„ë¡œì íŠ¸ì—ë§Œ íŠ¹í™”ëœë‹¤ë©´ â†’ Application

### **2. ëª¨ë¸ ì„¤ê³„ ì‹œ**
- AuthUserì—ëŠ” ì¸ì¦ì— **ê¼­ í•„ìš”í•œ** ì •ë³´ë§Œ
- ì¶”ê°€ ì •ë³´ëŠ” ìƒì†ì´ë‚˜ ì»´í¬ì§€ì…˜ìœ¼ë¡œ í™•ì¥
- ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆì™€ ëª¨ë¸ì„ 1:1 ë§¤í•‘í•˜ì§€ ë§ê³  í•„ìš”ì— ë”°ë¼ ë¶„ë¦¬

### **3. ì¸í„°í˜ì´ìŠ¤ ì„¤ê³„ ì‹œ**
- êµ¬í˜„ì²´ì— ì¢…ì†ì ì´ì§€ ì•Šë„ë¡ ì¶”ìƒì ìœ¼ë¡œ ì •ì˜
- ë©”ì„œë“œëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ë¯¸ ì¤‘ì‹¬ìœ¼ë¡œ ëª…ëª…
- ë°˜í™˜ íƒ€ì…ë„ ì¸í„°í˜ì´ìŠ¤ë‚˜ ì¶”ìƒ í´ë˜ìŠ¤ ì‚¬ìš© ê³ ë ¤

### **4. í…ŒìŠ¤íŠ¸ ì „ëµ**
- Core LayerëŠ” ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ 100% ì»¤ë²„ë¦¬ì§€ ëª©í‘œ
- Mockì„ ì´ìš©í•´ êµ¬í˜„ì²´ì— ë…ë¦½ì ì¸ í…ŒìŠ¤íŠ¸
- Application LayerëŠ” í†µí•© í…ŒìŠ¤íŠ¸ ì¤‘ì‹¬

ì´ëŸ° êµ¬ì¡°ë¡œ ê°œë°œí•˜ë©´ **Todo ì•± â†’ ë‹¤ë¥¸ ì•±ìœ¼ë¡œ í™•ì¥**í•˜ê±°ë‚˜, **ì¸ì¦ ë°©ì‹ ë³€ê²½**, **ë°ì´í„°ë² ì´ìŠ¤ êµì²´** ë“±ì´ ë§¤ìš° ì‰¬ì›Œì§‘ë‹ˆë‹¤.

## ğŸ”§ ìƒì„¸ êµ¬í˜„ ê³„íš

### ğŸ“± **Flutter í´ë¼ì´ì–¸íŠ¸ êµ¬í˜„ ê³„íš**

#### **Phase 1: ê¸°ë³¸ êµ¬ì¡° ë° ìƒíƒœ ê´€ë¦¬ (1ì£¼)**
```dart
// lib/core/auth/ êµ¬ì¡°
lib/
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â”œâ”€â”€ auth_user.dart          # ê¸°ë³¸ ì‚¬ìš©ì ëª¨ë¸
â”‚   â”‚   â”‚   â”œâ”€â”€ login_request.dart      # ë¡œê·¸ì¸ ìš”ì²­ ëª¨ë¸
â”‚   â”‚   â”‚   â””â”€â”€ auth_result.dart        # ì¸ì¦ ê²°ê³¼ ëª¨ë¸
â”‚   â”‚   â”œâ”€â”€ providers/
â”‚   â”‚   â”‚   â”œâ”€â”€ auth_provider.dart      # Riverpod ì¸ì¦ ìƒíƒœ ê´€ë¦¬
â”‚   â”‚   â”‚   â””â”€â”€ token_provider.dart     # JWT í† í° ê´€ë¦¬
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ auth_service.dart       # ì¸ì¦ ì„œë¹„ìŠ¤ (API í˜¸ì¶œ)
â”‚   â”‚   â”‚   â”œâ”€â”€ token_storage.dart      # í† í° ë¡œì»¬ ì €ì¥
â”‚   â”‚   â”‚   â””â”€â”€ auth_interceptor.dart   # HTTP ì¸í„°ì…‰í„°
â”‚   â”‚   â””â”€â”€ repositories/
â”‚   â”‚       â””â”€â”€ auth_repository.dart    # ì¸ì¦ Repository íŒ¨í„´
â”‚   â”œâ”€â”€ network/
â”‚   â”‚   â”œâ”€â”€ dio_client.dart             # Dio HTTP í´ë¼ì´ì–¸íŠ¸ ì„¤ì •
â”‚   â”‚   â””â”€â”€ api_endpoints.dart          # API ì—”ë“œí¬ì¸íŠ¸ ìƒìˆ˜
â”‚   â””â”€â”€ storage/
â”‚       â””â”€â”€ secure_storage.dart         # Flutter Secure Storage ë˜í¼
â”œâ”€â”€ features/
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ login/
â”‚   â”‚   â”‚   â”œâ”€â”€ login_screen.dart       # ë¡œê·¸ì¸ í™”ë©´
â”‚   â”‚   â”‚   â”œâ”€â”€ login_controller.dart   # ë¡œê·¸ì¸ ë¡œì§
â”‚   â”‚   â”‚   â””â”€â”€ widgets/
â”‚   â”‚   â”‚       â”œâ”€â”€ login_form.dart     # ë¡œê·¸ì¸ í¼
â”‚   â”‚   â”‚       â””â”€â”€ oauth_buttons.dart  # OAuth ë²„íŠ¼ë“¤
â”‚   â”‚   â”œâ”€â”€ register/
â”‚   â”‚   â”‚   â”œâ”€â”€ register_screen.dart    # íšŒì›ê°€ì… í™”ë©´
â”‚   â”‚   â”‚   â””â”€â”€ register_controller.dart
â”‚   â”‚   â””â”€â”€ profile/
â”‚   â”‚       â”œâ”€â”€ profile_screen.dart     # í”„ë¡œí•„ í™”ë©´
â”‚   â”‚       â””â”€â”€ profile_controller.dart
â”‚   â””â”€â”€ tasks/                          # ê¸°ì¡´ íƒœìŠ¤í¬ ê¸°ëŠ¥ ìœ ì§€
â””â”€â”€ shared/
    â”œâ”€â”€ widgets/
    â”‚   â”œâ”€â”€ loading_widget.dart         # ë¡œë”© ìœ„ì ¯
    â”‚   â””â”€â”€ error_widget.dart           # ì—ëŸ¬ í‘œì‹œ ìœ„ì ¯
    â””â”€â”€ utils/
        â”œâ”€â”€ validators.dart             # ì…ë ¥ ê²€ì¦ ìœ í‹¸
        â””â”€â”€ constants.dart              # ìƒìˆ˜ ì •ì˜
```

#### **ì£¼ìš” êµ¬í˜„ ë‚´ìš©**
```dart
// 1. AuthUser ëª¨ë¸
class AuthUser {
  final String userId;
  final String email;
  final String displayName;
  final String? profileImageUrl;
  final DateTime createdAt;
  
  // JWTì—ì„œ ì¶”ì¶œë˜ëŠ” ì •ë³´ë“¤
  factory AuthUser.fromJwt(Map<String, dynamic> payload) {
    return AuthUser(
      userId: payload['sub'],
      email: payload['email'],
      displayName: payload['name'] ?? payload['email'],
      profileImageUrl: payload['picture'],
      createdAt: DateTime.fromMillisecondsSinceEpoch(payload['iat'] * 1000),
    );
  }
}

// 2. AuthProvider (Riverpod)
final authProvider = StateNotifierProvider<AuthNotifier, AuthState>((ref) {
  return AuthNotifier(ref.read(authServiceProvider));
});

class AuthNotifier extends StateNotifier<AuthState> {
  final AuthService _authService;
  
  AuthNotifier(this._authService) : super(AuthState.initial());
  
  Future<void> login(String email, String password) async {
    state = state.copyWith(isLoading: true);
    try {
      final result = await _authService.login(email, password);
      if (result.success) {
        state = state.copyWith(
          isLoading: false,
          isAuthenticated: true,
          user: result.user,
          token: result.accessToken,
        );
      }
    } catch (e) {
      state = state.copyWith(
        isLoading: false,
        error: e.toString(),
      );
    }
  }
}

// 3. AuthService
class AuthService {
  final DioClient _dioClient;
  final TokenStorage _tokenStorage;
  
  Future<AuthResult> login(String email, String password) async {
    final response = await _dioClient.post('/auth/login', data: {
      'email': email,
      'password': password,
    });
    
    if (response.data['success']) {
      final token = response.data['data']['accessToken'];
      await _tokenStorage.saveToken(token);
      
      return AuthResult(
        success: true,
        accessToken: token,
        user: AuthUser.fromJwt(_parseJwt(token)),
      );
    }
    
    throw AuthException(response.data['error']['message']);
  }
  
  // Google OAuth ë¡œê·¸ì¸
  Future<AuthResult> loginWithGoogle() async {
    final GoogleSignInAccount? googleUser = await GoogleSignIn().signIn();
    if (googleUser == null) throw AuthException('Google ë¡œê·¸ì¸ ì·¨ì†Œ');
    
    final GoogleSignInAuthentication googleAuth = await googleUser.authentication;
    
    // êµ¬ê¸€ í† í°ì„ ìš°ë¦¬ ì„œë²„ë¡œ ì „ì†¡í•˜ì—¬ JWT ë°›ê¸°
    final response = await _dioClient.post('/auth/google', data: {
      'googleToken': googleAuth.accessToken,
    });
    
    // ì‘ë‹µ ì²˜ë¦¬ëŠ” ë™ì¼
    return _processAuthResponse(response);
  }
}
```

#### **Phase 2: UI êµ¬í˜„ ë° ë„¤ë¹„ê²Œì´ì…˜ (1ì£¼)**
```dart
// ë¡œê·¸ì¸ í™”ë©´ êµ¬í˜„
class LoginScreen extends ConsumerWidget {
  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final authState = ref.watch(authProvider);
    
    return Scaffold(
      body: Padding(
        padding: EdgeInsets.all(24),
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            // ë¡œê³  ë° íƒ€ì´í‹€
            Text('FlutterTodo', style: Theme.of(context).textTheme.headlineLarge),
            SizedBox(height: 48),
            
            // ë¡œê·¸ì¸ í¼
            LoginForm(
              onSubmit: (email, password) {
                ref.read(authProvider.notifier).login(email, password);
              },
            ),
            
            SizedBox(height: 24),
            
            // OAuth ë²„íŠ¼ë“¤
            OAuthButtons(
              onGooglePressed: () {
                ref.read(authProvider.notifier).loginWithGoogle();
              },
              onApplePressed: () {
                // Apple ë¡œê·¸ì¸ êµ¬í˜„
              },
            ),
            
            // ë¡œë”© ìƒíƒœ í‘œì‹œ
            if (authState.isLoading) 
              Padding(
                padding: EdgeInsets.only(top: 16),
                child: CircularProgressIndicator(),
              ),
              
            // ì—ëŸ¬ ìƒíƒœ í‘œì‹œ
            if (authState.error != null)
              Padding(
                padding: EdgeInsets.only(top: 16),
                child: Text(
                  authState.error!,
                  style: TextStyle(color: Colors.red),
                ),
              ),
          ],
        ),
      ),
    );
  }
}
```

#### **Phase 3: ì¸ì¦ ìƒíƒœ ê´€ë¦¬ ë° ë„¤ë¹„ê²Œì´ì…˜ (1ì£¼)**
```dart
// ë©”ì¸ ì•±ì—ì„œ ì¸ì¦ ìƒíƒœì— ë”°ë¥¸ ë„¤ë¹„ê²Œì´ì…˜
class MyApp extends ConsumerWidget {
  @override
  Widget build(BuildContext context, WidgetRef ref) {
    return MaterialApp.router(
      routerConfig: GoRouter(
        redirect: (context, state) {
          final authState = ref.read(authProvider);
          final isLoginPage = state.location == '/login';
          
          if (!authState.isAuthenticated && !isLoginPage) {
            return '/login';
          }
          if (authState.isAuthenticated && isLoginPage) {
            return '/';
          }
          return null;
        },
        routes: [
          GoRoute(
            path: '/login',
            builder: (context, state) => LoginScreen(),
          ),
          GoRoute(
            path: '/',
            builder: (context, state) => HomeScreen(),
          ),
          GoRoute(
            path: '/tasks',
            builder: (context, state) => TaskListView(),
          ),
        ],
      ),
    );
  }
}

// HTTP ì¸í„°ì…‰í„°ë¡œ ìë™ í† í° ì²¨ë¶€
class AuthInterceptor extends Interceptor {
  final TokenStorage _tokenStorage;
  
  @override
  void onRequest(RequestOptions options, RequestInterceptorHandler handler) async {
    final token = await _tokenStorage.getToken();
    if (token != null) {
      options.headers['Authorization'] = 'Bearer $token';
    }
    handler.next(options);
  }
  
  @override
  void onError(DioException err, ErrorInterceptorHandler handler) {
    if (err.response?.statusCode == 401) {
      // í† í° ë§Œë£Œ ì‹œ ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬
      _tokenStorage.clearToken();
      // ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
    }
    handler.next(err);
  }
}
```

### ğŸŒ **Spring Boot API ì„œë²„ êµ¬í˜„ ê³„íš**

#### **Phase 1: ê¸°ë³¸ í”„ë¡œì íŠ¸ êµ¬ì¡° ë° ì„¤ì • (1ì£¼)**
```java
// í”„ë¡œì íŠ¸ êµ¬ì¡°
src/main/java/com/fluttertodo/
â”œâ”€â”€ FlutterTodoApplication.java         # ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜
â”œâ”€â”€ config/                             # ì„¤ì • í´ë˜ìŠ¤ë“¤
â”‚   â”œâ”€â”€ SecurityConfig.java             # Spring Security ì„¤ì •
â”‚   â”œâ”€â”€ JwtConfig.java                  # JWT ì„¤ì •
â”‚   â”œâ”€â”€ CorsConfig.java                 # CORS ì„¤ì •
â”‚   â””â”€â”€ DatabaseConfig.java             # DB ì„¤ì •
â”œâ”€â”€ auth/                               # ì¸ì¦ ê´€ë ¨ (ì¬ì‚¬ìš© ê°€ëŠ¥)
â”‚   â”œâ”€â”€ controller/
â”‚   â”‚   â””â”€â”€ AuthController.java         # ì¸ì¦ API ì»¨íŠ¸ë¡¤ëŸ¬
â”‚   â”œâ”€â”€ service/
â”‚   â”‚   â”œâ”€â”€ AuthService.java            # ì¸ì¦ ì„œë¹„ìŠ¤ (í•µì‹¬)
â”‚   â”‚   â”œâ”€â”€ JwtTokenService.java        # JWT í† í° ê´€ë¦¬
â”‚   â”‚   â””â”€â”€ OAuthService.java           # OAuth ì²˜ë¦¬
â”‚   â”œâ”€â”€ model/
â”‚   â”‚   â”œâ”€â”€ AuthUser.java               # ê¸°ë³¸ ì‚¬ìš©ì ëª¨ë¸
â”‚   â”‚   â”œâ”€â”€ LoginRequest.java           # ë¡œê·¸ì¸ ìš”ì²­ DTO
â”‚   â”‚   â”œâ”€â”€ AuthResponse.java           # ì¸ì¦ ì‘ë‹µ DTO
â”‚   â”‚   â””â”€â”€ JwtClaims.java              # JWT í´ë ˆì„
â”‚   â”œâ”€â”€ repository/
â”‚   â”‚   â””â”€â”€ AuthUserRepository.java     # ì‚¬ìš©ì Repository
â”‚   â””â”€â”€ exception/
â”‚       â”œâ”€â”€ AuthException.java          # ì¸ì¦ ì˜ˆì™¸
â”‚       â””â”€â”€ TokenExpiredException.java  # í† í° ë§Œë£Œ ì˜ˆì™¸
â”œâ”€â”€ todo/                               # TODO ì•± íŠ¹í™” ê¸°ëŠ¥
â”‚   â”œâ”€â”€ controller/
â”‚   â”‚   â”œâ”€â”€ TaskController.java         # íƒœìŠ¤í¬ API
â”‚   â”‚   â”œâ”€â”€ TeamController.java         # íŒ€ API
â”‚   â”‚   â””â”€â”€ ProjectController.java      # í”„ë¡œì íŠ¸ API
â”‚   â”œâ”€â”€ service/
â”‚   â”‚   â”œâ”€â”€ TaskService.java
â”‚   â”‚   â”œâ”€â”€ TeamService.java
â”‚   â”‚   â””â”€â”€ ProjectService.java
â”‚   â”œâ”€â”€ model/
â”‚   â”‚   â”œâ”€â”€ TodoUser.java               # TODO íŠ¹í™” ì‚¬ìš©ì (AuthUser í™•ì¥)
â”‚   â”‚   â”œâ”€â”€ Task.java
â”‚   â”‚   â”œâ”€â”€ Team.java
â”‚   â”‚   â””â”€â”€ Project.java
â”‚   â””â”€â”€ repository/
â”‚       â”œâ”€â”€ TodoUserRepository.java
â”‚       â”œâ”€â”€ TaskRepository.java
â”‚       â””â”€â”€ TeamRepository.java
â””â”€â”€ common/                             # ê³µí†µ ìœ í‹¸ë¦¬í‹°
    â”œâ”€â”€ dto/
    â”‚   â”œâ”€â”€ ApiResponse.java            # í‘œì¤€ API ì‘ë‹µ
    â”‚   â””â”€â”€ PagedResponse.java          # í˜ì´ì§• ì‘ë‹µ
    â”œâ”€â”€ exception/
    â”‚   â””â”€â”€ GlobalExceptionHandler.java # ì „ì—­ ì˜ˆì™¸ ì²˜ë¦¬
    â””â”€â”€ util/
        â”œâ”€â”€ DateTimeUtil.java
        â””â”€â”€ ValidationUtil.java
```

#### **ì£¼ìš” êµ¬í˜„ ë‚´ìš©**
```java
// 1. AuthService - í•µì‹¬ ì¸ì¦ ë¡œì§ (ì¬ì‚¬ìš© ê°€ëŠ¥)
@Service
@Transactional
public class AuthService {
    private final AuthUserRepository userRepository;
    private final PasswordEncoder passwordEncoder;
    private final JwtTokenService jwtTokenService;
    private final OAuthService oAuthService;
    
    /**
     * ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸ ë¡œê·¸ì¸ - ì–´ë–¤ í”„ë¡œì íŠ¸ë“  ë™ì¼
     */
    public AuthResponse login(LoginRequest request) {
        // 1. ì‚¬ìš©ì ì¡°íšŒ
        AuthUser user = userRepository.findByEmail(request.getEmail())
            .orElseThrow(() -> new AuthException("ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"));
        
        // 2. ë¹„ë°€ë²ˆí˜¸ ê²€ì¦
        if (!passwordEncoder.matches(request.getPassword(), user.getPasswordHash())) {
            throw new AuthException("ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤");
        }
        
        // 3. JWT í† í° ìƒì„±
        String accessToken = jwtTokenService.generateAccessToken(user);
        String refreshToken = jwtTokenService.generateRefreshToken(user);
        
        return AuthResponse.builder()
            .success(true)
            .accessToken(accessToken)
            .refreshToken(refreshToken)
            .user(user)
            .expiresAt(jwtTokenService.getExpirationTime())
            .build();
    }
    
    /**
     * Google OAuth ë¡œê·¸ì¸ - êµ¬ê¸€ í† í°ì„ ìš°ë¦¬ JWTë¡œ ë³€í™˜
     */
    public AuthResponse loginWithGoogle(String googleToken) {
        // 1. êµ¬ê¸€ í† í° ê²€ì¦ ë° ì‚¬ìš©ì ì •ë³´ ì¶”ì¶œ
        GoogleUserInfo googleUser = oAuthService.verifyGoogleToken(googleToken);
        
        // 2. ë¡œì»¬ ì‚¬ìš©ì ìƒì„± ë˜ëŠ” ì¡°íšŒ
        AuthUser user = userRepository.findByEmail(googleUser.getEmail())
            .orElseGet(() -> createUserFromGoogle(googleUser));
        
        // 3. ìš°ë¦¬ ì‹œìŠ¤í…œì˜ JWT í† í° ìƒì„±
        String accessToken = jwtTokenService.generateAccessToken(user);
        String refreshToken = jwtTokenService.generateRefreshToken(user);
        
        return AuthResponse.builder()
            .success(true)
            .accessToken(accessToken)
            .refreshToken(refreshToken)
            .user(user)
            .build();
    }
    
    /**
     * í† í° ê²€ì¦ - ëª¨ë“  ë³´í˜¸ëœ APIì—ì„œ ì‚¬ìš©
     */
    public AuthUser validateToken(String token) {
        if (!jwtTokenService.isValidToken(token)) {
            throw new TokenExpiredException("í† í°ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤");
        }
        
        String userId = jwtTokenService.getUserIdFromToken(token);
        return userRepository.findById(userId)
            .orElseThrow(() -> new AuthException("ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"));
    }
}

// 2. JwtTokenService - JWT í† í° ê´€ë¦¬
@Service
public class JwtTokenService {
    @Value("${jwt.secret}")
    private String jwtSecret;
    
    @Value("${jwt.expiration:3600}")
    private int jwtExpiration; // 1ì‹œê°„
    
    public String generateAccessToken(AuthUser user) {
        Date expiryDate = new Date(System.currentTimeMillis() + jwtExpiration * 1000);
        
        return Jwts.builder()
            .setSubject(user.getUserId())
            .claim("email", user.getEmail())
            .claim("name", user.getDisplayName())
            .claim("role", user.getRole())
            .setIssuedAt(new Date())
            .setExpirationDate(expiryDate)
            .signWith(SignatureAlgorithm.HS512, jwtSecret)
            .compact();
    }
    
    public boolean isValidToken(String token) {
        try {
            Jwts.parser().setSigningKey(jwtSecret).parseClaimsJws(token);
            return true;
        } catch (JwtException | IllegalArgumentException e) {
            return false;
        }
    }
    
    public String getUserIdFromToken(String token) {
        Claims claims = Jwts.parser()
            .setSigningKey(jwtSecret)
            .parseClaimsJws(token)
            .getBody();
        return claims.getSubject();
    }
}

// 3. AuthController - ì¸ì¦ API ì—”ë“œí¬ì¸íŠ¸
@RestController
@RequestMapping("/api/auth")
@Validated
public class AuthController {
    private final AuthService authService;
    
    @PostMapping("/login")
    public ResponseEntity<ApiResponse<AuthResponse>> login(
            @Valid @RequestBody LoginRequest request) {
        
        AuthResponse response = authService.login(request);
        return ResponseEntity.ok(ApiResponse.success(response));
    }
    
    @PostMapping("/google")
    public ResponseEntity<ApiResponse<AuthResponse>> googleLogin(
            @RequestBody GoogleLoginRequest request) {
        
        AuthResponse response = authService.loginWithGoogle(request.getGoogleToken());
        return ResponseEntity.ok(ApiResponse.success(response));
    }
    
    @PostMapping("/refresh")
    public ResponseEntity<ApiResponse<AuthResponse>> refresh(
            @RequestBody RefreshTokenRequest request) {
        
        AuthResponse response = authService.refreshToken(request.getRefreshToken());
        return ResponseEntity.ok(ApiResponse.success(response));
    }
    
    @PostMapping("/logout")
    public ResponseEntity<ApiResponse<String>> logout(
            @RequestHeader("Authorization") String authHeader) {
        
        String token = extractToken(authHeader);
        authService.logout(token);
        return ResponseEntity.ok(ApiResponse.success("ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤"));
    }
    
    @GetMapping("/me")
    public ResponseEntity<ApiResponse<AuthUser>> getCurrentUser(
            @RequestHeader("Authorization") String authHeader) {
        
        String token = extractToken(authHeader);
        AuthUser user = authService.validateToken(token);
        return ResponseEntity.ok(ApiResponse.success(user));
    }
}
```

#### **Phase 2: JWT ë³´ì•ˆ ë° ë¯¸ë“¤ì›¨ì–´ (1ì£¼)**
```java
// JWT ì¸ì¦ í•„í„°
@Component
public class JwtAuthenticationFilter extends OncePerRequestFilter {
    private final JwtTokenService jwtTokenService;
    private final AuthService authService;
    
    @Override
    protected void doFilterInternal(HttpServletRequest request, 
                                  HttpServletResponse response, 
                                  FilterChain filterChain) throws ServletException, IOException {
        
        String token = getTokenFromRequest(request);
        
        if (token != null && jwtTokenService.isValidToken(token)) {
            try {
                AuthUser user = authService.validateToken(token);
                
                // Spring Security ì»¨í…ìŠ¤íŠ¸ì— ì¸ì¦ ì •ë³´ ì„¤ì •
                UsernamePasswordAuthenticationToken authentication = 
                    new UsernamePasswordAuthenticationToken(user, null, user.getAuthorities());
                SecurityContextHolder.getContext().setAuthentication(authentication);
                
            } catch (Exception e) {
                logger.error("JWT í† í° ê²€ì¦ ì‹¤íŒ¨: {}", e.getMessage());
            }
        }
        
        filterChain.doFilter(request, response);
    }
    
    private String getTokenFromRequest(HttpServletRequest request) {
        String bearerToken = request.getHeader("Authorization");
        if (bearerToken != null && bearerToken.startsWith("Bearer ")) {
            return bearerToken.substring(7);
        }
        return null;
    }
}

// Security ì„¤ì •
@Configuration
@EnableWebSecurity
public class SecurityConfig {
    private final JwtAuthenticationFilter jwtAuthenticationFilter;
    
    @Bean
    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
        http
            .csrf().disable()
            .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)
            .and()
            .authorizeHttpRequests(auth -> auth
                .requestMatchers("/api/auth/**").permitAll()
                .requestMatchers("/api/health").permitAll()
                .requestMatchers("/swagger-ui/**").permitAll()
                .anyRequest().authenticated()
            )
            .addFilterBefore(jwtAuthenticationFilter, UsernamePasswordAuthenticationFilter.class);
            
        return http.build();
    }
}
```

#### **Phase 3: TODO ì•± ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ (2ì£¼)**
```java
// TaskController - ì¸ì¦ëœ ì‚¬ìš©ìì˜ íƒœìŠ¤í¬ ê´€ë¦¬
@RestController
@RequestMapping("/api/tasks")
public class TaskController {
    private final TaskService taskService;
    
    @GetMapping
    public ResponseEntity<ApiResponse<List<Task>>> getTasks(
            Authentication authentication) {
        
        AuthUser user = (AuthUser) authentication.getPrincipal();
        List<Task> tasks = taskService.getTasksByUser(user.getUserId());
        return ResponseEntity.ok(ApiResponse.success(tasks));
    }
    
    @PostMapping
    public ResponseEntity<ApiResponse<Task>> createTask(
            @Valid @RequestBody CreateTaskRequest request,
            Authentication authentication) {
        
        AuthUser user = (AuthUser) authentication.getPrincipal();
        Task task = taskService.createTask(user.getUserId(), request);
        return ResponseEntity.ok(ApiResponse.success(task));
    }
    
    @PutMapping("/{taskId}")
    public ResponseEntity<ApiResponse<Task>> updateTask(
            @PathVariable String taskId,
            @Valid @RequestBody UpdateTaskRequest request,
            Authentication authentication) {
        
        AuthUser user = (AuthUser) authentication.getPrincipal();
        Task task = taskService.updateTask(taskId, request, user.getUserId());
        return ResponseEntity.ok(ApiResponse.success(task));
    }
}
```

### ğŸ”„ **í†µí•© í…ŒìŠ¤íŠ¸ ë° ë°°í¬ ê³„íš (1ì£¼)**

#### **API í…ŒìŠ¤íŠ¸**
```java
@SpringBootTest
@AutoConfigureTestDatabase
@Testcontainers
class AuthControllerIntegrationTest {
    
    @Container
    static PostgreSQLContainer<?> postgres = new PostgreSQLContainer<>("postgres:13");
    
    @Test
    void ë¡œê·¸ì¸_ì„±ê³µ_í…ŒìŠ¤íŠ¸() {
        // Given
        LoginRequest request = new LoginRequest("test@example.com", "password123");
        
        // When
        ResponseEntity<ApiResponse<AuthResponse>> response = 
            restTemplate.postForEntity("/api/auth/login", request, 
                new ParameterizedTypeReference<>() {});
        
        // Then
        assertThat(response.getStatusCode()).isEqualTo(HttpStatus.OK);
        assertThat(response.getBody().getData().getAccessToken()).isNotNull();
    }
    
    @Test
    void JWT_í† í°ìœ¼ë¡œ_ë³´í˜¸ëœ_API_ì ‘ê·¼_í…ŒìŠ¤íŠ¸() {
        // Given
        String token = getValidJwtToken();
        HttpHeaders headers = new HttpHeaders();
        headers.setBearerAuth(token);
        
        // When
        ResponseEntity<ApiResponse<List<Task>>> response = 
            restTemplate.exchange("/api/tasks", HttpMethod.GET, 
                new HttpEntity<>(headers), new ParameterizedTypeReference<>() {});
        
        // Then
        assertThat(response.getStatusCode()).isEqualTo(HttpStatus.OK);
    }
}
```

### ğŸ“‹ **ê°œë°œ ìš°ì„ ìˆœìœ„ ë° íƒ€ì„ë¼ì¸**

#### **Week 1-2: ë°±ì—”ë“œ ê¸°ë³¸ êµ¬ì¡°**
- [ ] Spring Boot í”„ë¡œì íŠ¸ ì„¤ì •
- [ ] ê¸°ë³¸ ì¸ì¦ API êµ¬í˜„ (ë¡œê·¸ì¸, íšŒì›ê°€ì…)
- [ ] JWT í† í° ì‹œìŠ¤í…œ êµ¬í˜„
- [ ] ê¸°ë³¸ ë³´ì•ˆ ì„¤ì •

#### **Week 3-4: í”„ë¡ íŠ¸ì—”ë“œ ê¸°ë³¸ êµ¬ì¡°**
- [ ] Flutter í”„ë¡œì íŠ¸ ì¸ì¦ ëª¨ë“ˆ êµ¬í˜„
- [ ] ë¡œê·¸ì¸/íšŒì›ê°€ì… í™”ë©´
- [ ] ìƒíƒœ ê´€ë¦¬ (Riverpod) ì„¤ì •
- [ ] API ì—°ë™ ë° í† í° ê´€ë¦¬

#### **Week 5-6: OAuth í†µí•©**
- [ ] Google OAuth ë°±ì—”ë“œ êµ¬í˜„
- [ ] Flutter Google Sign-In ì—°ë™
- [ ] Apple Sign-In ì¶”ê°€ (ì„ íƒì‚¬í•­)

#### **Week 7-8: TODO ì•± ê¸°ëŠ¥ ì—°ë™**
- [ ] ê¸°ì¡´ ë¡œì»¬ íƒœìŠ¤í¬ë¥¼ ì„œë²„ ì—°ë™ìœ¼ë¡œ ì „í™˜
- [ ] ì‹¤ì‹œê°„ ë™ê¸°í™” êµ¬í˜„
- [ ] íŒ€ ê¸°ëŠ¥ êµ¬í˜„

ì´ ê³„íšìœ¼ë¡œ **ë‹¨ìˆœí•˜ë©´ì„œë„ í™•ì¥ ê°€ëŠ¥í•œ JWT ê¸°ë°˜ ì¸ì¦ ì‹œìŠ¤í…œ**ì„ êµ¬ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-07-22  
**ë²„ì „**: v1.0 (í˜„ì¬) â†’ v2.0 (ê³„íš)  
**ë‹´ë‹¹ì**: ê°œë°œíŒ€